# -*- coding: utf-8 -*-
import telebot
from keyboards import main_keyboard
from utils import send_message_with_cleanup, save_user_message

def setup_other_handlers(bot):
    @bot.message_handler(func=lambda m: m.text == '🚌 Маршруты')
    def handle_routes(message):
        user_id = message.from_user.id
        save_user_message(user_id, message.message_id, message.chat.id)
        
        routes_text = """🚌 МАРШРУТЫ 6-й АВТОКОЛОННЫ

📊 Всего маршрутов: 6

📍 Маршрут 149:
• 🛣️ Путь: Коровино - МЦД Дегунино
• ⏰ Интервал движения: 8-12 минут

📍 Маршрут 353:
• 🛣️ Путь: Осташковская ул. - Метро "Владыкино"
• 👨‍💼 Бригадир: Скворцов Андрей Игоревич
  📱 +7(968)973-58-73 | Таб. 4691
• 👨‍💼 Бригадир: Барсуков Антон Васильевич
  📱 +7(926)675-81-99 | Таб. 3997

📍 Маршрут 604:
• 🛣️ Путь: МЦК Ростокино - Метро "Семёновская"
• 👨‍💼 Бригадир: Семенов Александр Валерьевич
  📱 +7(926)593-01-23 | Таб. 2586
• 👨‍💼 Бригадир: Михайлин Роман Александрович
  📱 +7(963)722-40-56 | Таб. 7269

📍 Маршрут Н6:
• 🛣️ Путь: Осташковская ул. - Метро "Китай-город"
• 🕐 Время работы: 23:30 - 05:30
• 👨‍💼 Бригадир: Агаев Матлаб Тофиг оглы
  📱 +7(985)331-82-72 | Таб. 3928

📍 Маршрут Е59:
• 🛣️ Путь: Осташковская ул. - 9-я Северная линия
• 👨‍💼 Бригадир: Диланян Гарик Владимирович
  📱 +7(999)838-49-73 | Таб. 4163
• 👨‍💼 Бригадир: Сафаров Абдурасул Абдушкурович
  📱 +7(985)895-53-34 | Таб. 8263

📍 Маршрут Т36:
• 🛣️ Путь: ВДНХ (главный вход) - Метро "Лианозово"
• 👨‍💼 Бригадир: Пурич Иван Диомидович
  📱 +7(926)719-03-77 | Таб. 4603
• 👨‍💼 Бригадир: Калмыков Константин Вахидович
  📱 +7(926)140-25-68 | Таб. 4276

⚠️ Важно:
• Все бригадиры работают в сменном режиме
• График работы: 2/2 или 5/2
• Телефоны бригадиров также есть в общей базе водителей"""

        send_message_with_cleanup(
            bot, user_id, message.chat.id,
            routes_text,
            main_keyboard(user_id),
            log_action="routes"
        )
    
    @bot.message_handler(func=lambda m: m.text == '🏥 Профосмотр')
    def handle_medical(message):
        user_id = message.from_user.id
        save_user_message(user_id, message.message_id, message.chat.id)
        
        medical_text = """🏥 ИНФОРМАЦИЯ О ПРОФОСМОТРЕ

Адрес медицинского центра:
📍 Шмитовский проезд, 25с1, Москва, 123317

Как добраться:
🚇 Метро: «Улица 1905 года», «Выставочная»
🚌 Автобусы: м2, m27, 243
🚗 Автомобиль: удобный подъезд, есть парковка

Для навигации:
🗺️ Открыть в Яндекс.Картах: 
https://yandex.ru/maps/?text=Шмитовский+проезд,+25с1,+Москва,+123317

Что брать с собой:
• 📄 Паспорт
• 📄 Водительское удостоверение
• 📄 Табельный номер
• 📄 Медкарту (при наличии)

Важно:
• ✅ Приходить натощак
• ✅ Не употреблять алкоголь за 24 часа
• ✅ Иметь при себе все документов

📞 Контакты медцентра:
• Регистратура: +7(495)123-45-67
• Специалист: +7(999)765-43-21

⏰ Часы работы:
• Пн-Пт: 08:00-16:00
• Сб: 09:00-13:00
• Вс: выходной"""

        send_message_with_cleanup(
            bot, user_id, message.chat.id,
            medical_text,
            main_keyboard(user_id),
            log_action="medical"
        )
    
    @bot.message_handler(func=lambda m: m.text == '🏢 Филиалы')
    def handle_branches(message):
        user_id = message.from_user.id
        save_user_message(user_id, message.message_id, message.chat.id)
        
        branches_text = """🏢 ФИЛИАЛЫ КОМПАНИИ

📍 Северо-Восточный филиал:
• Адрес: г. Москва, Бибиревская улица, д. 2, стр. 1
• Метро: 🚇 «Бибирево», «Алтуфьево»
• Отдел кадров: 📞 +7(499)901-77-46
• Режим работы: ⏰ Пн-Пт: 08:00-20:00, Сб-Вс: 09:00-18:00
• Район: 🗺️ СВАО, ВАО, ЦАО

📍 Южный филиал:
• Адрес: г. Москва, Каширское шоссе, д. 67, стр. 2
• Метро: 🚇 «Каширская», «Кантемировская»
• Отдел кадров: 📞 +7(495)398-67-61
• Доп. телефон: 📞 +7(985)169-84-39
• Режим работы: ⏰ Пн-Пт: 08:00-21:00, Сб-Вс: 09:00-19:00
• Район: 🗺️ ЮАО, ЮВАО

📍 Юго-Западный филиал:
• Адрес: г. Москва, Новоясеневский пр-т, д. 4, стр. 3
• Метро: 🚇 «Ясенево», «Новоясеневская»
• Отдел кадров: 📞 +7(495)437-01-80
• Режим работы: ⏰ Пн-Пт: 07:30-20:30, Сб-Вс: 09:00-17:00
• Район: 🗺️ ЮЗАО, ЗАО

📍 Северо-Западный филиал:
• Адрес: г. Зеленоград, ул. Академика Валиева, д. 1, стр. 1
• Метро: 🚇 «Речной вокзал» + автобус
• Отдел кадров: 📞 +7(499)735-65-63
• Режим работы: ⏰ Пн-Пт: 08:00-20:00, Сб-Вс: 10:00-18:00
• Район: 🗺️ СЗАО, САО, Зеленоград

🚛 Обслуживаемые районы:
• Северо-Восточный: СВАО, ВАО, ЦАО
• Южный: ЮАО, ЮВАО
• Юго-Западный: ЮЗАО, ЗАО
• Северо-Западный: СЗАО, САО, Зеленоград

💡 Примечание:
• Все филиалы оборудованы современной техникой
• Есть комнаты отдыха для водителей
• Работают столовые и буфеты
• Бесплатный Wi-Fi на территории

📞 Единая справочная: +7(495)950-40-00"""

        send_message_with_cleanup(
            bot, user_id, message.chat.id,
            branches_text,
            main_keyboard(user_id),
            log_action="branches"
        )